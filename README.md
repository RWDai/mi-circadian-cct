# mi-circadian-cct

小米智能家居极客版昼夜节律曲线生成器（色温 + 亮度）

## 功能特点

- 支持色温曲线和亮度曲线两种模式（Tab 切换）
- 可视化曲线编辑器（点击添加关键帧、拖动调整、双击删除）
- 分段 Sigmoid 平滑插值，曲线过渡自然
- 基于纬度自动计算日出日落时间
- 实时预览 24 小时变化曲线
- 生成米家极客版兼容的公式（可直接复制使用）
- 支持自定义参数范围和过渡陡度
- 深色/浅色主题切换
- 所有计算在本地完成，不上传任何数据

## 使用方法

1. 选择曲线类型（色温/亮度）
2. 输入你所在位置的纬度（可通过[小米经纬度查询](https://cnbj1.fds.api.xiaomi.com/mijia-tob/prod/ai-config/pos-v2/index.html)获取）
3. 调整过渡陡度 (k) 参数控制曲线的平滑程度
4. 设置参数范围：
   - 色温：最低/最高色温（默认 2700K-6500K）
   - 亮度：最低亮度（默认 1%），最高固定为 100%
5. 在曲线编辑器中：
   - 点击空白处添加关键帧
   - 拖动关键帧调整时间和数值
   - 双击关键帧删除
6. 复制生成的公式到米家极客版使用

## 参数说明

### 通用参数
- **纬度**: 你所在位置的纬度，用于计算日出日落时间
- **过渡陡度 (k)**: 控制 Sigmoid 曲线的陡峭程度，值越大过渡越快

### 色温参数
- **最低色温**: 夜间色温（暖光），推荐 2700K
- **最高色温**: 日间色温（冷光），推荐 6500K

### 亮度参数
- **最低亮度**: 夜间亮度，可设置 0-99%
- **最高亮度**: 固定为 100%（不可修改）

## 技术实现

- 使用分段 Sigmoid 函数实现关键帧之间的平滑过渡
- 公式格式兼容米家极客版表达式语法
- 支持任意数量的关键帧（至少2个）
- 亮度曲线 Y 轴固定 0-100% 范围

## 在线使用

访问 GitHub Pages 部署的页面即可使用。

## License

MIT
